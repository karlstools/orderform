<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Broadband Material Request</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>

<style>
body {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    -webkit-tap-highlight-color: transparent;
}
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

.card-selected {
    border: 2px solid #2563eb;
    background-color: #eff6ff;
}

#orderInputs {
    transition: max-height 0.35s ease, opacity 0.35s ease;
    overflow: hidden;
}

#cartDrawer {
    transform: translateY(100%);
    transition: transform 0.35s ease;
}
.cart-open #cartDrawer {
    transform: translateY(0);
}
.cart-open body {
    overflow: hidden;
}
</style>
</head>

<body class="bg-slate-50 text-slate-800 pb-32">

<!-- HEADER -->
<div class="sticky top-0 z-30 bg-white border-b shadow-sm">
  <div class="max-w-7xl mx-auto px-3 py-3 flex justify-between items-center">
    <h1 class="text-xl md:text-2xl font-bold text-blue-900 flex items-center gap-2">
      ðŸ“¦ Broadband Material Request
    </h1>

    <button onclick="toggleDetails()" class="md:hidden text-xs font-bold text-blue-600 bg-blue-50 px-3 py-2 rounded-full">
      Order Info â–¼
    </button>

    <div class="hidden md:flex items-center gap-2 text-sm font-medium">
      <span>Date:</span>
      <input type="date" id="orderDate" class="border rounded px-2 py-1">
    </div>
  </div>

  <div id="orderInputs" class="max-h-0 opacity-0 md:max-h-96 md:opacity-100 bg-slate-50">
    <div class="max-w-7xl mx-auto px-3 py-4 grid grid-cols-2 md:grid-cols-4 gap-3 bg-white rounded-lg border">
      <div class="md:hidden col-span-2">
        <label class="text-xs font-bold">Order Date</label>
        <input type="date" id="orderDateMobile" onchange="syncDates(this.value)" class="w-full border rounded p-2">
      </div>

      <div><label class="text-xs font-bold">From Warehouse</label><input class="w-full border rounded p-2"></div>
      <div><label class="text-xs font-bold">To Truck</label><input class="w-full border rounded p-2"></div>
      <div><label class="text-xs font-bold">Issued By</label><input class="w-full border rounded p-2"></div>
      <div><label class="text-xs font-bold">Received By</label><input class="w-full border rounded p-2"></div>
    </div>
  </div>
</div>

<!-- SEARCH -->
<div class="max-w-7xl mx-auto px-3 py-3">
<input id="searchInput" placeholder="Search equipment..." class="w-full border rounded-lg p-2">
</div>

<!-- GRID -->
<div class="max-w-7xl mx-auto px-3 py-4">
  <div id="gridContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div>
</div>

<!-- FOOTER -->
<div class="fixed bottom-0 left-0 right-0 bg-white border-t p-3 shadow-md z-30">
  <div class="max-w-7xl mx-auto flex justify-between items-center">
    <div class="text-sm">
      Total Items:
      <strong id="totalCount">0</strong>
    </div>

    <button onclick="toggleCartDrawer()" class="bg-blue-600 text-white px-4 py-2 rounded">View Cart</button>
  </div>
</div>

<!-- CART DRAWER -->
<div id="cartDrawer" class="fixed bottom-0 left-0 right-0 bg-white border-t max-h-[80vh] flex flex-col z-50">
  <div class="p-4 border-b flex justify-between">
    <strong>Your Cart</strong>
    <button onclick="toggleCartDrawer()">âœ–</button>
  </div>
  <div id="cartList" class="p-3 overflow-y-auto flex-grow"></div>
</div>

<script>
const today = new Date().toISOString().split('T')[0];
document.getElementById('orderDate').value = today;
document.getElementById('orderDateMobile').value = today;

let cart = {};
let isCartOpen = false;
let isDetailsOpen = false;

function syncDates(val){
 document.getElementById('orderDate').value = val;
}

function toggleDetails(){
 const el = document.getElementById('orderInputs');
 isDetailsOpen = !isDetailsOpen;
 el.style.maxHeight = isDetailsOpen ? '400px':'0';
 el.style.opacity = isDetailsOpen ? '1':'0';
}

function toggleCartDrawer(){
 isCartOpen = !isCartOpen;
 document.body.classList.toggle('cart-open');
 renderCart();
}

function renderCart(){
 const list = document.getElementById('cartList');
 list.innerHTML = '';
 let total = 0;

 for(const key in cart){
   total++;
   list.innerHTML += `
   <div class="flex justify-between p-2 bg-gray-50 rounded">
     <span>${key}</span>
     <strong>${cart[key]}</strong>
   </div>`;
 }
 document.getElementById('totalCount').innerText = total;
}
</script>

</body>
</html>